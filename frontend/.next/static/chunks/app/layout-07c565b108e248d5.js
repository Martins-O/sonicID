(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{3199:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,3673,23)),Promise.resolve().then(n.bind(n,7034))},3673:()=>{},7034:(e,t,n)=>{"use strict";n.d(t,{WalletProvider:()=>c,v:()=>i});var r=n(5155),o=n(2115);let a=(0,o.createContext)(void 0);function i(){let e=(0,o.useContext)(a);if(void 0===e)throw Error("useWallet must be used within a WalletProvider");return e}function c(e){let{children:t}=e,[n,i]=(0,o.useState)(!1),[c,l]=(0,o.useState)(!1),[s,h]=(0,o.useState)(""),[u,d]=(0,o.useState)(""),[w,m]=(0,o.useState)(!1),f={chainId:"0x3909",chainName:"Sonic Testnet",nativeCurrency:{name:"Sonic",symbol:"S",decimals:18},rpcUrls:["https://rpc.testnet.soniclabs.com"],blockExplorerUrls:["https://testnet.soniclabs.com"]},v=async()=>{if(window.ethereum)try{let e=await window.ethereum.request({method:"eth_chainId"}),t=e===f.chainId;m(t),t?d("Sonic Testnet"):d({"0x1":"Ethereum Mainnet","0x89":"Polygon","0xa86a":"Avalanche","0x38":"BSC Mainnet","0xaa36a7":"Ethereum Sepolia","0x13881":"Polygon Mumbai"}[e]||"Unknown Network")}catch(e){console.error("Failed to check network:",e)}},y=async()=>{if(window.ethereum)try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[f]})}catch(e){console.error("Failed to add Sonic Testnet:",e),alert("Failed to add Sonic Testnet to your wallet")}},S=async()=>{if(!window.ethereum)return void alert("Please install MetaMask to connect your wallet!");l(!0);try{let e=await window.ethereum.request({method:"eth_requestAccounts"});if(0===e.length)throw Error("No accounts found");h(e[0]),i(!0),await v()}catch(e){console.error("Failed to connect wallet:",e),alert("Failed to connect wallet: "+e.message)}finally{l(!1)}};return(0,o.useEffect)(()=>{(async()=>{if(window.ethereum)try{let e=await window.ethereum.request({method:"eth_accounts"});e.length>0&&(h(e[0]),i(!0),await v())}catch(e){console.error("Failed to check wallet connection:",e)}})()},[]),(0,o.useEffect)(()=>{if(window.ethereum){let e=e=>{0===e.length?(i(!1),h("")):e[0]!==s&&(h(e[0]),i(!0))},t=async()=>{await v()};return window.ethereum.on("accountsChanged",e),window.ethereum.on("chainChanged",t),()=>{var n,r;null==(n=window.ethereum)||n.removeListener("accountsChanged",e),null==(r=window.ethereum)||r.removeListener("chainChanged",t)}}},[s]),(0,r.jsx)(a.Provider,{value:{isConnected:n,walletAddress:s,isConnecting:c,currentNetwork:u,isOnSonicTestnet:w,connectWallet:S,disconnectWallet:()=>{i(!1),h("")},addSonicTestnet:y},children:t})}}},e=>{e.O(0,[978,441,255,358],()=>e(e.s=3199)),_N_E=e.O()}]);